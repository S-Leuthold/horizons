% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/visuals-plot_ensemble_upset.R
\name{plot_ensemble_upset}
\alias{plot_ensemble_upset}
\title{Plot an UpSet-style summary of top-performing ensemble workflows}
\usage{
plot_ensemble_upset(
  results_dir,
  ensemble_results = NULL,
  num_models = 30,
  metric = "rsq",
  components = c("Model", "Transformation", "Preprocessing", "Covariates"),
  collapse_rare_traits = TRUE,
  simplify = FALSE,
  custom_metric = NULL
)
}
\arguments{
\item{results_dir}{Character. Path to the directory containing \code{batch_summary_...qs}.}

\item{ensemble_results}{Optional list. A fitted \code{stacks} ensemble object with \verb{$evaluation_metrics}.}

\item{num_models}{Integer. Number of top-performing workflows to include (default: 30).}

\item{metric}{Character. Performance metric to plot and rank models by (e.g., \code{"rsq"}, \code{"rmse"}).}

\item{components}{Character vector. Workflow components to include in the intersection matrix.
Must be a subset of: \code{"Model"}, \code{"Preprocessing"}, \code{"Transformation"}, \code{"Covariates"}.}

\item{collapse_rare_traits}{Logical. If \code{TRUE}, component values used in <10\% of top workflows
will be collapsed into \code{"Other {category}"} (default: \code{TRUE}).}

\item{simplify}{Logical. If \code{TRUE}, components are simplified into semantic groupings
(e.g., "Tree-Based", "Standardized"). Cannot be used with \code{collapse_rare_traits = TRUE}.}

\item{custom_metric}{Character (optional). Custom label for the y-axis if \code{metric = "custom"}.}
}
\value{
A \code{patchwork} composite plot object showing performance bars and component intersections.
Use \code{print()} or \code{ggsave()} to visualize or export.
}
\description{
This function visualizes the intersection of modeling components (e.g., model type,
preprocessing, transformations, covariate sets) across the top-N performing workflows
from a batch model evaluation. It generates a two-part composite plot: a bar chart
of performance metric values and a matrix-style intersection plot indicating which
components are used by which workflows. Optionally includes an overlay for ensemble performance.
}
\details{
This function is designed for interactive exploration of workflow intersections and performance.
It uses internally defined component parsing logic and optionally maps components to semantic
groups (model family, preprocessing type, etc.). An ensemble overlay is drawn as a dashed line
if \code{ensemble_results} is provided.

All parsing is based on \code{wflow_id} naming conventions. Ensure consistent naming across workflows.
}
\section{Required Packages}{

This function requires the following packages to be installed and available:
}

\seealso{
\code{\link{run_batch_evaluation}}, \code{\link{evaluate_stacks}}, \code{\link{plot_metric_summary}}
}
