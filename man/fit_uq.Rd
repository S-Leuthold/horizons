% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fit-uq.R
\name{fit_uq}
\alias{fit_uq}
\title{Fit Uncertainty Quantification Components}
\usage{
fit_uq(
  fitted_workflow,
  oof_predictions,
  calib_data,
  role_map,
  transformation = "none",
  level_default = DEFAULT_UQ_LEVEL
)
}
\arguments{
\item{fitted_workflow}{A fitted tidymodels workflow (final model on
train_Fit).}

\item{oof_predictions}{Tibble with columns \code{.pred}, \code{.pred_trans}, \code{truth},
\code{.row}, \code{.fold}, \code{config_id}. OOF predictions from \code{fit_resamples()}.}

\item{calib_data}{Data frame for conformal calibration (calib_Fit split).}

\item{role_map}{Tibble with \code{variable} and \code{role} columns.}

\item{transformation}{Character. Transformation applied to the response
(e.g. "none", "log", "log10", "sqrt").}

\item{level_default}{Numeric. Default coverage level. Default 0.90.}
}
\value{
Named list with fields: \code{quantile_model}, \code{scores}, \code{n_calib},
\code{level_default}, \code{oof_coverage}, \code{mean_width}, \code{prepped_recipe}.
Returns NULL if calibration set is too small (\code{n < N_CALIB_MIN}).
}
\description{
Trains a quantile random forest on OOF residuals from the point model,
then computes conformal nonconformity scores on the held-out calibration
data. Returns everything needed for \code{predict()} to produce prediction
intervals at any coverage level.
}
\details{
This function is the \strong{capture layer} â€” it runs silently and returns a
structured list. Messaging is the caller's responsibility.
}
\keyword{internal}
