% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/covariates-soil-create_clustered_subsets.R
\name{create_clustered_subsets}
\alias{create_clustered_subsets}
\title{Create Clustered Training Subsets from PCA Scores}
\usage{
create_clustered_subsets(
  training_data,
  pca_model,
  kmeans_model,
  n_components,
  coverage = 0.8
)
}
\arguments{
\item{training_data}{A \code{tibble} of MIR spectral data already projected into principal component space
(i.e., columns named \code{Dim.1}, \code{Dim.2}, ...). All non-spectral columns are retained in the output.}

\item{pca_model}{A PCA model object returned by \code{stats::prcomp()} used for projection into PCA space.}

\item{kmeans_model}{A fitted \code{kmeans} object whose cluster centers define proximity for sample selection.}

\item{n_components}{Integer. Number of PCA components to use during projection (e.g., 50).}

\item{coverage}{Numeric (between 0 and 1). Proportion of samples per cluster to retain based on distance
to the cluster centroid. Defaults to \code{0.8}.}
}
\value{
A named \code{list} of \code{tibble}s. Each element represents a training subset corresponding to one cluster
(e.g., \code{"Cluster_1"}, \code{"Cluster_2"}, ...), retaining only the samples closest to the centroid in PCA space.
}
\description{
Projects training samples into PCA space, assigns them to clusters based on
proximity to k-means centroids, and selects a representative subset from each cluster.
The most central samples—defined by Euclidean distance in PCA space—are retained according to
a user-specified coverage threshold.
}
\details{
This function is designed to facilitate localized model calibration by filtering training samples
based on their similarity to cluster centers. This approach reduces outlier influence and computational
burden, particularly when paired with local model ensembles. Coverage values near \code{1.0} retain most samples,
while lower values emphasize only the most representative.

Cluster assignments are made using nearest-centroid classification in PCA space.
Euclidean distances are used for all calculations.
}
\examples{
\dontrun{
training_subsets <- create_clustered_subsets(
  training_data = my_training_data,
  pca_model     = my_pca_model,
  kmeans_model  = my_kmeans_model,
  n_components  = 50,
  coverage      = 0.8
)
}

}
