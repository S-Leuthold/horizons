% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/library-uq.R
\name{train_quantile_model}
\alias{train_quantile_model}
\title{Train Ranger Quantile Regression Model}
\usage{
train_quantile_model(
  train_data,
  preprocessing,
  transformation,
  grid_size = 5,
  cv_folds = 5,
  resamples = NULL,
  verbose = FALSE
)
}
\arguments{
\item{train_data}{Tibble with training data. Must contain:
\itemize{
\item \code{Response} column (target variable)
\item \code{Sample_ID} and \code{Project} columns
\item Spectral columns (numeric wavenumber names like "600", "602", etc.)
}}

\item{preprocessing}{Character. Spectral preprocessing method (e.g., "snv", "snv_deriv1").
Will be applied via \code{build_recipe()} if not "raw".}

\item{transformation}{Character. Response transformation (e.g., "none", "log", "sqrt").}

\item{grid_size}{Integer. Number of hyperparameter grid points for tuning (default: 5).
Kept small since ranger is robust to hyperparameters.}

\item{cv_folds}{Integer. Number of cross-validation folds (default: 5).
Kept small since we're using this for UQ, not point prediction accuracy.}

\item{resamples}{Optional rsample object. Pre-computed CV folds for CV+ conformal
calibration. If NULL (default), folds are created internally using cv_folds.}

\item{verbose}{Logical. Print progress messages?}
}
\value{
A fitted workflow object containing the ranger quantile model,
or NULL if training fails.
}
\description{
Trains a single ranger quantile regression model that can predict multiple
quantiles at prediction time. This is a completely standalone training
function that doesn't rely on the existing \code{train_and_score_config()}
infrastructure, providing clean separation between point and quantile models.
}
\details{
\subsection{Why Standalone?}{

This function is intentionally separate from \code{train_and_score_config()} because:
\itemize{
\item Quantile models have different evaluation criteria (not rpd/ccc/r2)
\item Always uses ranger (no model selection needed)
\item Simpler tuning (ranger is robust, doesn't need extensive search)
\item Clearer code - one function = one purpose
}
}

\subsection{Training Process}{
\enumerate{
\item Build recipe with specified preprocessing/transformation (NO feature selection)
\item Create ranger quantile specification
\item Create workflow
\item Tune hyperparameters (mtry, min_n) via grid search (5 points default)
\item Finalize with best parameters
\item Fit on full training data
\item Apply butcher() for memory reduction
}
}

\subsection{Why No Feature Selection?}{

Ranger's built-in feature importance handles feature selection internally,
so pre-selecting features isn't necessary and can actually hurt performance.
}
}
\keyword{internal}
