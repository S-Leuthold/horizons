% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/covar_cluster_input.R
\name{cluster_input_data}
\alias{cluster_input_data}
\title{Cluster MIR Spectra Using PCA and K-Means Clustering}
\usage{
cluster_input_data(input_data)
}
\arguments{
\item{input_data}{A tibble containing Sample_ID, spectral features (numeric wavenumber columns),
and optional metadata.}
}
\value{
A list containing:
\describe{
\item{input_data}{Input data with an added \code{Cluster} column assigning each sample to a cluster.}
\item{pca_model}{PCA model object (\code{prcomp}) used for dimensionality reduction.}
\item{kmeans_model}{K-means clustering model fitted to PCA scores.}
\item{ncomp}{Number of PCA components needed to explain 99.5\% of total variance.}
}
}
\description{
Reduces dimensionality of mid-infrared (MIR) spectral data using PCA, then identifies optimal clusters
via silhouette analysis and finalizes clustering with k-means.
Clusters are used to guide local model calibration for soil covariate prediction.
}
\details{
If the silhouette-optimal number of clusters exceeds 5, the function caps the number of clusters at 3
to prioritize computational efficiency and interpretability.
}
\examples{
\dontrun{
clustered_data <- cluster_input_data(my_spectral_data)
head(clustered_data$input_data)
}

}
\seealso{
\code{\link[stats]{prcomp}}, \code{\link[stats]{kmeans}}, \code{\link[cluster]{silhouette}}
}
\keyword{internal}
