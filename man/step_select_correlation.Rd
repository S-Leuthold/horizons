% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/feature-correlation.R
\name{step_select_correlation}
\alias{step_select_correlation}
\title{Correlation-Based Feature Selection for Spectral Predictors}
\usage{
step_select_correlation(
  recipe,
  ...,
  outcome,
  role = "predictor",
  trained = FALSE,
  skip = FALSE,
  id = recipes::rand_id("select_correlation")
)
}
\arguments{
\item{recipe}{A \code{recipes::recipe()} object.}

\item{...}{Selector functions to choose spectral predictor columns (e.g., \code{all_predictors()}).}

\item{outcome}{Character. Name of the outcome variable to use for correlation scoring.}

\item{role}{Character. Role for retained variables. Default is \code{"predictor"}.}

\item{trained}{Logical. Required by \code{recipes}; indicates if the step has been prepped.}

\item{skip}{Logical. Should this step be skipped during \code{bake()}? Default is \code{FALSE}.}

\item{id}{Character. Unique identifier for the step. Auto-generated by default.}
}
\value{
A \code{step_select_correlation} object that can be added to a recipe.
}
\description{
Applies sliding-window Spearman correlation to identify predictive spectral regions.
Retains all wavenumbers that appear in windows where the mean absolute Spearman
correlation with the outcome exceeds an adaptive threshold (mean + 1 standard deviation).
Designed for use with high-resolution MIR spectra in wide format (columns = wavenumbers).
}
\details{
The selection algorithm slides a 3-wavenumber window (6 cm⁻¹ at 2 cm⁻¹ resolution) across
the spectrum, computes the mean absolute Spearman correlation between each window and
the outcome, and retains all wavenumbers from windows where the score exceeds
\verb{mean + 1 SD}. Duplicate selections are collapsed. If no windows meet the threshold,
all input wavenumbers are retained with a warning.

This step is designed to operate on spectra that have already been preprocessed
(e.g., SNV + derivative). It should be applied after spectral transformation but
before dimensionality reduction (e.g., PCA) or model fitting.
}
\seealso{
\code{\link[recipes:recipe]{recipes::recipe()}}, \code{\link[recipes:prep]{recipes::prep()}}, \code{\link[recipes:bake]{recipes::bake()}}
}
