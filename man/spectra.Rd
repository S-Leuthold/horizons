% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pipeline-spectra.R
\name{spectra}
\alias{spectra}
\title{Load spectral data from files or tibble}
\usage{
spectra(
  source,
  type = NULL,
  id_col = NULL,
  wavelength_cols = NULL,
  recursive = FALSE
)
}
\arguments{
\item{source}{Path to directory, file(s), or a tibble/data.frame.}

\item{type}{Character. One of \code{"opus"}, \code{"csv"}, or \code{NULL} for auto-detect.
Default: \code{NULL}.}

\item{id_col}{Character. Column name to use as sample ID. If \code{NULL},
auto-detects from common aliases. Default: \code{NULL}.}

\item{wavelength_cols}{Character vector. Column names containing spectral data.
If \code{NULL}, auto-detects numeric column names or \verb{wn_*} prefix. Default: \code{NULL}.}

\item{recursive}{Logical. For directory paths, search subdirectories.
Default: \code{FALSE}.}
}
\value{
A \code{horizons_data} S3 object with:
\itemize{
\item \code{data$analysis}: tibble with \code{sample_id}, \code{filename}, \verb{wn_*} columns, and
any additional columns
\item \code{data$role_map}: tibble mapping columns to roles
\item \code{provenance}: source and creation metadata
}
}
\description{
Entry point for the horizons pipeline. Loads spectral data from OPUS files,
CSV files, or accepts a pre-loaded tibble/data.frame. Returns a \code{horizons_data}
object ready for downstream processing.
}
\details{
This function handles three input types:
\itemize{
\item \strong{OPUS files} (\code{type = "opus"}): Read via \code{opusreader2::read_opus()}.
Filenames become \code{sample_id}, wavenumber columns get \code{wn_} prefix.
\item \strong{CSV files} (\code{type = "csv"}): Read via \code{readr::read_csv()}.
Auto-detects ID and wavelength columns.
\item \strong{Tibble/data.frame}: Same detection logic as CSV.
}

The \code{filename} column (role: meta) preserves original filenames for traceability
and later ID parsing via \code{parse_ids()}.
}
\examples{
\dontrun{
# OPUS files
spectra("path/to/opus/")

# CSV with auto-detection
spectra("data.csv")

# Tibble with explicit columns
spectra(my_data, id_col = "SampleName")
}

}
