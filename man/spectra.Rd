% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pipeline-spectra.R
\name{spectra}
\alias{spectra}
\title{Load spectral data into a horizons_data object}
\usage{
spectra(
  source,
  type = NULL,
  id_col = NULL,
  wavelength_cols = NULL,
  recursive = FALSE
)
}
\arguments{
\item{source}{\link{character or data.frame.} Path to OPUS directory, CSV file,
or a pre-loaded tibble/data.frame.}

\item{type}{\link{character or NULL.} Explicit type override: \code{"opus"}, \code{"csv"},
or \code{NULL} for auto-detection. Default: \code{NULL}.}

\item{id_col}{\link{character or NULL.} Name of the sample ID column. If \code{NULL},
auto-detects from common aliases. Default: \code{NULL}.}

\item{wavelength_cols}{\link{character vector or NULL.} Names of wavelength
columns. If \code{NULL}, auto-detects columns with \code{wn_} prefix or numeric
names. Default: \code{NULL}.}

\item{recursive}{\link{logical.} For OPUS directories, search subdirectories.
Default: \code{FALSE}.}
}
\value{
A \code{horizons_data} object with:
\describe{
\item{data$analysis}{Tibble with \code{sample_id} and \verb{wn_*} columns}
\item{data$role_map}{Tibble mapping columns to roles (id, predictor, meta)}
\item{provenance}{Source path, type, timestamps, version info}
}
}
\description{
Entry point for the horizons pipeline. Loads spectral data from OPUS files,
CSV files, or an in-memory tibble and returns a standardized \code{horizons_data}
object ready for preprocessing and modeling.
}
\details{
The function automatically detects the input type and routes to the
appropriate reader:
\itemize{
\item \strong{OPUS files}: Binary files from Bruker spectrometers. Provide a directory
path containing \code{.0}, \code{.1}, etc. files. Sample IDs are extracted from
filenames.
\item \strong{CSV files}: Comma-delimited files with samples as rows and wavelengths
as columns. The function auto-detects ID and wavelength columns.
\item \strong{Tibble/data.frame}: Pre-loaded data with the same structure as CSV.
}

Column detection uses a priority-based alias system for ID columns and
pattern matching for wavelength columns. Override with explicit parameters
if auto-detection fails.
}
\examples{
\dontrun{
# From OPUS files
hd <- spectra("path/to/opus/")

# From CSV
hd <- spectra("data.csv")

# From tibble with explicit ID column
hd <- spectra(my_data, id_col = "SampleName")
}

}
