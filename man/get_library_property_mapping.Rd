% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/library-data.R
\name{get_library_property_mapping}
\alias{get_library_property_mapping}
\title{Library-Based Prediction Data Infrastructure}
\usage{
get_library_property_mapping()
}
\value{
A tibble with 15 rows and 6 columns:
\describe{
\item{property}{Horizons standard name (e.g., "clay", "ph", "total_carbon")}
\item{analyte}{Full OSSL analyte description with ISO method}
\item{ossl_name}{OSSL internal variable name for data extraction}
\item{lab_method}{Laboratory method/extraction procedure used}
\item{target_unit}{Expected units for the property}
\item{description}{Human-readable description}
}
}
\description{
Functions for loading, preprocessing, and transforming reference spectral libraries
(OSSL/KSSL) for library-based prediction mode. Provides standardized property mappings,
method harmonization, and PCA-based dimensionality reduction for clustering and modeling.

Returns standardized mapping from horizons property names to OSSL variable names
for the 15 properties supported in library-based prediction mode. Includes
laboratory method metadata for method harmonization.
}
\details{
This module supports the Library Prediction Service, enabling predictions for standard
soil properties without requiring user-provided training data. The library is preprocessed
once, clustered, and used to train property-specific models at prediction time.

This function provides the canonical mapping between horizons standard property
names and OSSL internal variable names. The mapping is based on OSSL v1.2 schema
and includes method metadata for filtering to single laboratory procedures.

Properties were selected based on Ng et al. 2022 benchmarking study showing
Category A/B prediction accuracy (RÂ² > 0.70) with MIR spectroscopy.
}
\section{Properties Supported}{

\itemize{
\item \strong{Texture} (3): clay, sand, silt (pipette method, iso 11277)
\item \strong{Carbon} (3): total_carbon, oc, carbonate (combustion/acid methods)
\item \strong{Nitrogen} (1): total_nitrogen (combustion, iso 11261)
\item \strong{Chemistry} (2): ph (1:1 H2O, iso 10390), cec (NH4OAc pH 7.0, iso 11260)
\item \strong{Base Cations} (4): calcium, magnesium, potassium, sodium (NH4OAc extraction)
\item \strong{Major Elements} (2): iron_total, aluminum_total (dithionite extraction)
}
}

\examples{
\dontrun{
# Get mapping table
mapping <- horizons:::get_library_property_mapping()

# Find OSSL column for a property
clay_col <- mapping$ossl_name[mapping$property == "clay"]

# Check lab method
ph_method <- mapping$lab_method[mapping$property == "ph"]
}

}
\references{
Ng et al. 2022. Mid-infrared spectroscopy for accurate measurement of an extensive
set of soil properties. Soil Security 6:100043.
}
\seealso{
\link{LIBRARY_PROPERTIES}, \code{\link[=load_ossl_raw]{load_ossl_raw()}}
}
\keyword{Get}
\keyword{Library}
\keyword{Mapping}
\keyword{Property}
\keyword{internal}
