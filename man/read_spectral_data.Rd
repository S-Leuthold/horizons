% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/input_read_opus_spectra.R
\name{read_spectral_data}
\alias{read_spectral_data}
\title{Read and Resample OPUS Spectral File}
\usage{
read_spectral_data(data_source, file_name, project_name)
}
\arguments{
\item{data_source}{A character string giving the full file path to the OPUS binary file.}

\item{file_name}{A character string specifying the file name (used to parse project metadata).}

\item{project_name}{A character string identifying the project. Used to select the correct absorbance channel:
\itemize{
\item \code{"NRCS"} → uses channel \code{"ab"}
\item all others → use channel \code{"ab_no_atm_comp"}
}}
}
\value{
A tibble with the following columns:
\describe{
\item{Project}{Project identifier parsed from file name.}
\item{Sample_ID}{Sample identifier parsed from file name.}
\item{Fraction}{Fraction label parsed from file name.}
\item{Wavenumber}{Spectral wavenumber (cm⁻¹), 600–4000 range.}
\item{Absorbance}{Absorbance value at each wavenumber.}
\item{File_Name}{Original file name of the OPUS file.}
}
}
\description{
Reads a single OPUS binary file using the \pkg{opusreader2} package, extracts
the appropriate absorbance channel based on project name, reshapes the spectral
data into long format, and resamples it to a common 2 cm⁻¹ resolution. The function
returns a cleaned tibble restricted to the 600–4000 cm⁻¹ wavenumber range.
}
\details{
Internally, this function:
\enumerate{
\item Calls \code{opusreader2::read_opus()} on the given file path.
\item Extracts the appropriate absorbance channel and converts to long format.
\item Parses \code{Project}, \code{Sample_ID}, and \code{Fraction} from the file name using underscores.
\item Resamples absorbance to 2 cm⁻¹ intervals using cubic spline interpolation.
\item Filters output to include only wavenumbers \code{<= 4000}.
}

If an error occurs (e.g., unreadable file), the function returns \code{NULL} and issues a warning.
}
\examples{
\dontrun{
# Read and resample a single OPUS file for project "MOYS"
read_spectral_data(data_source  = "/path/to/file/2022_MOYS_001_Clay.opus",
                   file_name    = "2022_MOYS_001_Clay.opus",
                   project_name = "MOYS")
}

}
\seealso{
\code{\link{create_input_data}}, \code{\link{get_file_location}}, \code{opusreader2::read_opus()}
}
\keyword{internal}
